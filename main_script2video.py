import asyncio
from pipelines.script2video_pipeline import Script2VideoPipeline


# SET YOUR OWN SCRIPT, USER REQUIREMENT, AND STYLE HERE
script = \
"""
角色卡（强化情感标签）•林爻：23岁，183cm，黑棕色短发，黑色夹克+白色打底衫+黑色长裤+白色运动鞋。抗战老兵，系统觉醒者，华夏军魂具象化。核心情感：对家国的赤诚、对战友的牵挂、对后人的护犊之情，八十年沉眠的憋屈与觉醒后的刚烈。•林之晴：20岁，168cm，黑色高马尾，白色毛茸茸毛衣+黑色短裙+白色堆堆袜+白色运动鞋，黑框眼镜。林爻曾孙女。核心情感：突遇恶鬼的极致恐惧、对祖辈的依赖与敬畏、绝境中的求生欲。•白衣女鬼：东瀛恶灵，白衣破朽，爬行姿态，面容诡异带裂伤，周身萦绕浓郁黑气。核心情感：对华夏的刻骨怨恨、对林家的执念复仇，遇见军魂时的本能怯懦。•灵异顾问A：26岁，黄毛断眉，白色短袖衬衣+蓝色围巾+带蓝色闪电纹路的宽松黑裤+白色鞋子。核心情感：对专业的骄傲、对未知的好奇与警惕。•灵异顾问B：35岁，中年络腮胡，带蓝色闪电纹路的白色外套+黑色裤子+黑色皮鞋。核心情感：经历过恶灵浩劫的创伤与凝重、对诡异现象的敬畏与不安。第一集1-1夜/外许都陵园墓场出场人物：林爻（骷髅形态）、林爻（肉身形态）、林之晴、白衣女鬼△破朽的木制棺材半埋在坟土中，棺身爬满枯藤，四周是错落歪斜的墓碑，墨黑夜空无星无月，只有风卷着枯叶擦过棺木的呜咽声。棺材内，白色骷髅静静平躺，眼窝漆黑，指骨上还残留着未褪尽的弹痕。系统电子音（清晰、机械，不带一丝温度）：肉身加载99%......林爻（独白，低沉有力，夹杂着八十年的沧桑与不甘）：我叫林爻，二十三岁那年，为了把小鬼子赶出华夏，死在了冲锋的路上。兄弟们都埋在了无名冢，我侥幸有块碑，可这一等，就是八十年！刚刚那深蓝色的系统说，它卡了八十年延迟，要给我疯狂加点补偿？呵，我那些长眠沙场的兄弟，谁来给他们补偿！△闪回记忆画面（快速切换，炮火声、嘶吼声震耳欲聋）：•红旗被硝烟熏黑，却依旧在阵地上高高飘扬，一名年轻战士用身体死死护住军旗，鲜血浸透旗面。•林爻身边的战友中枪倒地，临终前紧紧攥着他的手腕，嘶哑喊着：“林排长，守住......守住家国！”•林爻双眼赤红，挥着步枪带领仅剩的战士冲锋，子弹擦过他的脸颊，留下一道狰
狞的血痕。△闪回猛地骤停，切回棺材内近景，骷髅的眼窝中泛起微弱红光。系统电子音：肉身加载100%......力量、速度、敏捷、跳跃等属性均标注“max”符号。系统电子音：血气加载失败......请问宿主是否还活着？△切林爻近景，骷髅形态如冰雪消融般褪去，年轻的肉身逐渐显现——黑棕色短发根根立起，脸上还带着当年的弹痕浅印，他猛地睁眼，眼中红光爆射，满是压抑八十年的怒火。林爻（怒喊，声音嘶哑却带着穿透夜空的力量）：活着？我带着兄弟们的念想，硬生生“活”了八十年！你现在问我还活着吗？！林爻（皱眉，自语，语气中满是自嘲与憋屈）：没有血气......合着八十年后，我成了个没血没肉的怪物？可就算是怪物，我也是守着华夏疆土的怪物！△视角切远景，荒山坟场的碎石路上，林之晴疯了似的朝镜头方向狂奔，黑色高马尾散乱不堪，白色毛衣沾满泥污，黑框眼镜滑到鼻尖，眼神里是极致的恐惧。林之晴（大喊，声音颤抖得几乎破音）：救命啊！谁来救救我！撞鬼了！△林之晴背后，白衣女鬼四肢扭曲如蜘蛛，以诡异的爬行姿态紧追不舍，白衣下摆拖在地上磨得破烂，脸上挂着僵硬到扭曲的诡异笑容，周身黑气随着奔跑愈发浓郁，所过之处，枯叶瞬间发黑枯萎。△切林爻视角，他侧耳倾听，脸上的怒火渐渐被疑惑取代，八十年未闻的血亲气息，带着强烈的恐惧扑面而来。林之晴（画外音，惊慌失措，哭腔越来越重）：救命啊！爷爷！奶奶！谁来救救我！我不想死啊！△林爻面前，蓝色虚拟系统面板再度浮现，面板边缘因他的情绪波动而微微闪烁。系统面板：检测到宿主血亲（曾孙女林之晴）正在被东瀛恶灵（白衣女鬼）追杀！恶灵执念：复仇林家祖辈（抗战时期斩杀其本体）。△侧景，林爻从棺材中猛地愤怒坐起，棺木瞬间炸裂，枯藤断裂，碎石飞溅。林之晴（画外音，带着绝望）：爷爷！我好像跑到你坟头了！你显显灵，救救我啊！林爻（怒目圆睁，拳头攥得咯咯作响，声音震得棺木碎片发抖）：小鬼子的鬼魂！八十年了还敢来犯！还敢动我林家后人！△荒山林间，夜色浓重得如同化不开的墨。
△侧视全景，林之晴踉跄奔跑，脚下一滑，重重摔倒在地，黑框眼镜飞了出去，镜片摔得粉碎。白衣女鬼爬行中突然闪现，瞬间出现在她身后三米处。林之晴（惊恐地回头，手脚并用地往后退，眼泪混合着泥污淌满脸庞）：别过来！别过来！我的妈呀！△特写，白衣女鬼伸出泛着黑气的鬼爪，指甲尖利发黑，一把抓住林之晴的白色运动鞋，脸上的笑容愈发诡异，黑气顺着鞋子往上蔓延，灼烧着林之晴的脚踝。林之晴（疼得尖叫）：啊！好疼！放开我！△鞋子内侧，一枚小小的、用红绳系着的桃木符（林奶奶给她的护身符）突然亮起微弱金光，与黑气碰撞，发出滋滋声响。白衣女鬼突然翻白眼，表情痛苦扭曲，像是被烈火灼烧，猛地松开爪子，连连后退。△林之晴刚好摔在一座墓碑前，墓碑上竖写着“显考林公讳爻之灵墓”，碑前还摆着去年清明她亲手放的小雏菊，早已枯萎发黑。林之晴（趴在墓碑边，双手紧紧抱住墓碑，哭得撕心裂肺，语无伦次）：爷爷！我错了！我不该大晚上乱跑！我还没好好孝敬爷爷奶奶，还没活够啊！每年清明我都给你烧纸钱，你不能不管我啊！白衣女鬼（发出诡异低沉的笑声，带着刻骨的怨恨）：林......林家......偿命......林之晴（哭得浑身发抖，额头抵在冰冷的墓碑上）：爷爷，求你了，救救我......△白衣女鬼缓缓起身，周身黑气浓郁得几乎凝成实体，泛着黑气的鬼爪高高举起，朝着林之晴头顶抓去，黑气中隐约可见当年被林爻斩杀时的狰狞面孔。△墓碑突然亮起一阵刺眼的红色幽光，那是华夏军魂的怒火与守护之力，坟土瞬间炸裂，碎石飞溅，一道巍峨身影从红光中猛地站起，正是林爻，他眼神如烈火般熊熊燃烧，周身萦绕着淡淡的红色光晕，那是未散的军魂煞气。△特写白衣女鬼，原本诡异的笑容瞬间凝固，眼神中充满了深入骨髓的恐惧，嘴巴张大，身体剧烈颤抖，黑气在红色光晕的压迫下开始溃散。林之晴（哭着抬头，泪眼朦胧地看向林爻，声音哽咽得几乎说不出话）：爷......爷爷！林爻（看着她满脸的泪痕与恐惧，心中一软，随即捂脸叹气，放下手时，语气无奈又带着一丝严肃，还有不易察觉的心疼）：傻丫头，哭错坟了。你爷在那边，我是你曾爷爷——林爻，当年打小鬼子的。△全景，林爻转头看向白衣女鬼，眼神骤然变冷，那是经历过尸山血海的狠厉，抬手指向对方，红色光晕瞬间暴涨。白衣女鬼浑身剧烈发抖，黑气紊乱不堪，几乎要消
散。林爻（愤怒，声音铿锵有力，带着穿透时空的恨意与守护之意）：八十年前，你们被我们打回老家，八十年后，一个孤魂野鬼也敢来华夏地界撒野，追杀我的后人！今日，我便让你魂飞魄散！△近景，林爻身形一闪，带着红色残影，瞬间冲到白衣女鬼面前，抬手一巴掌狠狠扇出，掌风带着军魂的煞气。△特写白衣女鬼，脑袋在脖子上飞速转圈，发出“咯吱咯吱”的骨骼断裂声，脸上的裂伤越来越大，最终化作一缕青烟，伴随着凄厉的惨叫，彻底消散在空气中。第二集2-1夜/外许都陵园墓场出场人物：林爻、林之晴△远景，荒山墓场中，炸开的坟堆还在冒着淡淡的红雾，散落的棺木碎片上沾着红光，林爻站姿挺拔如松，林之晴瘫坐在墓碑旁，还在微微发抖。△切林之晴半身近景，她瞪大双眼，嘴巴微张，满脸的震惊与劫后余生的恍惚，眼中还残留着泪痕，看着林爻的眼神中充满了敬畏。林之晴（内心独白，语气震撼到极致）：曾爷爷......他竟然从坟里爬出来了！就一巴掌，就把那么凶的鬼打没了！他就是爷爷说的，那个二十三岁就牺牲的抗战英雄曾爷爷？△林之晴仔细打量林爻，切林爻近景（站姿挺拔，气息沉稳，黑色夹克上沾着坟土，却依旧难掩一身正气，脸上的弹痕浅印在夜色中若隐若现）。林之晴（内心独白，带着好奇与心疼）：曾爷爷看起来这么年轻，这么英气，可他二十三岁就......那张老照片里的他，笑得那么刚毅，原来就是这个样子。如果不是战争，他本该有更长的人生啊。△闪回：一张泛黄的老照片，照片中的林爻身着军装，身姿挺拔，胸前挂着军功章，笑容刚毅，身边站着几位战友，个个眼神坚定。照片边缘已经卷曲磨损，是林家代代相传的珍宝。△闪回结束，切林爻抬手拍了拍身上的尘土，动作间带着军人的利落，却又因“无血气”而略显僵硬，可那份守护的姿态从未改变。林爻（看向林之晴，语气平和，带着长辈对晚辈的关切）：丫头，没事了。你怎么会
被这鬼子鬼魂追到这儿？林之晴（回过神，擦了擦眼泪，吸了吸鼻子，语气带着后怕与委屈）：学校放假，我好久没回老家了，想回来看看爷爷奶奶。晚上从林家村出来，就看到它飘在村口的老槐树上，直勾勾地盯着我，然后就一直追，我跑了十几公里，实在跑不动了，就摔在这儿了。林爻（惊讶地挑眉，随即眼神变得复杂，有赞许也有心疼）：林家村到这儿，足足十五公里，你一个小姑娘，硬生生跑了过来，没被吓破胆，还真是我林家的种，随我当年行军的韧劲。林之晴（重重点头，眼泪又忍不住掉了下来）：我不敢停！我怕一停就死了，我还想再见爷爷奶奶，还想......还想多陪陪他们。△林爻目光下移，看向林之晴的腿部，她的白色堆堆袜磨破了洞，脚踝处有被黑气灼烧的红痕，虽穿着短裙，仍能看出因剧烈奔跑而紧绷的紧实肌肉轮廓。△切回林爻表情，嘴角微微一抽，随即眼神变得柔和，带着长辈的疼爱：那你也不简单......受委屈了，丫头。△林爻朝四下扫视一圈，夜色中的墓场寂静无声，只有风吹过树叶的沙沙声，可他眼中的警惕丝毫未减。他表情恢复平静，语气坚定。林爻：走吧，跟曾爷爷回家。我倒要看看，这小鬼子的鬼魂，是不是还有同伙。林之晴（眼神瞟向炸开的坟堆，面露恐惧，又看向林爻挺拔的背影，心中涌起一丝安全感，犹豫道）：曾爷爷，我们......我们真的要走吗？这里......△林爻无语地看了她一眼，抬手轻轻敲在她的额头上，动作轻柔，带着宠溺。画面一黑。△切男女主下山的远景，林之晴额头上顶着一个冒烟的大包，委屈地揉着额头，紧紧跟在林爻身后，原本的恐惧渐渐被对曾爷爷的依赖取代。△林间，两道身影快速闪过，伴随破空声特效，林爻的步伐虽略带僵硬，却依旧稳健有力，林之晴也跟着加快脚步，身姿矫健，速度极快，尽显林家后人的韧劲。2-2夜/外许都陵园墓场外围出场人物：灵异顾问A、灵异顾问B△镜头推进，前方一道更快的身影闪过，竟是一只脑门贴着黄符的机器狗（追风狗），速度远超林爻二人，黄符上的朱砂纹路在夜色中微微发光。△切灵异顾问A脸部特写，眼神锐利，带着对自己设备的骄傲，语气肯定。
灵异顾问A：没错！就在前面了！那摄魂级恶灵的气息，绝对没跑！△灵异顾问B侧身点头，表情严肃，眉头紧锁，眼中带着挥之不去的凝重。△画面切回林爻之前所在的坟场位置。△远景，灵异顾问A和B带着机器狗来到山头，四下打量，坟场的诡异氛围让他们不由自主地屏住呼吸。△近景，机器狗在炸开的坟堆旁蹦蹦跳跳，不停发出“汪汪”的急促叫声，显得焦躁不安。灵异顾问A伸手取下机器狗脑袋上的电池，机器狗瞬间安静。灵异顾问A（皱眉，满脸疑惑，语气中带着难以置信）：那只鬼的气味到这里消失了，凭空消失了？不可能啊，恶灵的气息除非魂飞魄散，否则绝不会凭空消失！灵异顾问A（自语，挠了挠黄毛）：难不成......真死了？△灵异顾问B从兜里掏出手机，屏幕上显示着一个刻有八卦图案的罗盘，指针飞速转动，毫无规律，像是被什么强大的力量干扰。切回灵异顾问B脸部特写，他缓缓摇头，眼神中带着深深的不安。灵异顾问B：怎么可能？上回许都那个村子，就是被这种级别的恶灵屠了一半人，我们两个拼尽全力才勉强脱身，差点就交代在那儿了！灵异顾问B（看向灵异顾问A，语气凝重）：不过，确实没了气息。可是你的傻狗不是检测到就在这吗？怎么会不见了？这太诡异了，简直不合常理！灵异顾问A（不服气地瞪了他一眼，梗着脖子反驳）：什么傻狗？这是追风狗！顶尖的恶灵追踪设备！从来没出过错！△灵异顾问A目光扫过地面，突然停下脚步，弯腰，眼神变得专注。灵异顾问A（疑惑）：等会......这是啥？△切地面和手部特写，灵异顾问A捡起一根黑色的头发，发丝上还残留着一丝微弱的黑气，触碰间带着刺骨的寒意。灵异顾问B（皱眉，吐槽，语气中带着一丝不耐）：捡起来让我闻吗？！你能不能靠谱点！△灵异顾问A凑近头发闻了闻，表情瞬间变得严肃，眼神中充满了震惊与难以置信。灵异顾问A（认真，声音发颤）：不对，好像真是那只鬼的气息！但......但只剩下头发了，而且这气息很微弱，像是被什么强大的力量彻底打散了！灵异顾问A（震惊地看向四周，语气带着深深的敬畏）：摄魂级恶灵，被灭了？这怎么可能！整个许都城，谁有这么大的本事？能把这种恶灵打得魂飞魄散！
△就在这时，灵异顾问B的目光落在了不远处炸开的坟头上，眼神一凝，脸上的凝重更甚，抬手示意灵异顾问A。灵异顾问B（声音低沉，带着一丝颤抖）：你们看那里——坟堆是从里面炸开的，像是有什么东西......破土而出了！
"""
user_requirement = \
"""
Fast-paced with no more than 15 shots.
"""
style = "Anime Style"



async def main():
    pipeline = Script2VideoPipeline.init_from_config(config_path="configs/script2video.yaml")
    await pipeline(script=script, user_requirement=user_requirement, style=style)


if __name__ == "__main__":
    asyncio.run(main())
